# Matrix èŠå¤©åº”ç”¨ - ç»„ä»¶åŒ–ç»“æ„æ–¹æ¡ˆ

## ğŸ“ æ–‡ä»¶å¤¹ç»“æ„

```
Matrix_Based_Chat_DIY/
â”œâ”€â”€ index.vue                    # ä¸»åº”ç”¨å®¹å™¨
â”œâ”€â”€ index.ts                     # å¯¼å‡º
â”œâ”€â”€ 
â”œâ”€â”€ components/                  # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Common/                  # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Loading/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue       # åŠ è½½åŠ¨ç”»
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ Avatar/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue       # ç”¨æˆ·å¤´åƒ
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ Tooltip/
â”‚   â”‚       â”œâ”€â”€ index.vue       # å·¥å…·æç¤º
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ Message/                 # æ¶ˆæ¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MessageItem/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue       # å•æ¡æ¶ˆæ¯
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ MessageInput/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue       # æ¶ˆæ¯è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ MessageList/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue       # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ MediaMessage/
â”‚   â”‚       â”œâ”€â”€ index.vue       # åª’ä½“æ¶ˆæ¯ï¼ˆå›¾ç‰‡/æ–‡ä»¶ï¼‰
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ Room/                    # æˆ¿é—´ç›¸å…³ç»„ä»¶
â”‚       â”œâ”€â”€ RoomItem/
â”‚       â”‚   â”œâ”€â”€ index.vue       # å•ä¸ªæˆ¿é—´é¡¹
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â”œâ”€â”€ RoomList/
â”‚       â”‚   â”œâ”€â”€ index.vue       # æˆ¿é—´åˆ—è¡¨
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â””â”€â”€ RoomHeader/
â”‚           â”œâ”€â”€ index.vue       # æˆ¿é—´å¤´éƒ¨ä¿¡æ¯
â”‚           â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ layouts/                     # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ ChatLayout/
â”‚   â”‚   â”œâ”€â”€ index.vue           # ä¸»èŠå¤©å¸ƒå±€
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ Sidebar/
â”‚   â”‚   â”œâ”€â”€ index.vue           # ä¾§è¾¹æ å¸ƒå±€
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ MainContent/
â”‚       â”œâ”€â”€ index.vue           # ä¸»å†…å®¹åŒºåŸŸ
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ views/                       # é¡µé¢è§†å›¾
â”‚   â”œâ”€â”€ Login/
â”‚   â”‚   â”œâ”€â”€ index.vue           # ç™»å½•é¡µé¢ âœ…å·²å­˜åœ¨
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ Chat/
â”‚   â”‚   â”œâ”€â”€ index.vue           # èŠå¤©ä¸»é¡µé¢
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ RoomSettings/
â”‚   â”‚   â”œâ”€â”€ index.vue           # æˆ¿é—´è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ UserProfile/
â”‚       â”œâ”€â”€ index.vue           # ç”¨æˆ·èµ„æ–™é¡µé¢
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ services/                    # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ matrix/
â”‚   â”‚   â”œâ”€â”€ client.ts           # Matrixå®¢æˆ·ç«¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ auth.ts             # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ rooms.ts            # æˆ¿é—´æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ messages.ts         # æ¶ˆæ¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ encryption.ts       # åŠ å¯†æœåŠ¡
â”‚   â”‚   â””â”€â”€ types.ts            # Matrixç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ time.ts             # æ—¶é—´å·¥å…·
â”‚       â”œâ”€â”€ format.ts           # æ ¼å¼åŒ–å·¥å…·
â”‚       â””â”€â”€ validation.ts       # éªŒè¯å·¥å…·
â”‚
â”œâ”€â”€ stores/                      # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth.ts                 # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ rooms.ts                # æˆ¿é—´çŠ¶æ€
â”‚   â”œâ”€â”€ messages.ts             # æ¶ˆæ¯çŠ¶æ€
â”‚   â”œâ”€â”€ ui.ts                   # UIçŠ¶æ€
â”‚   â””â”€â”€ index.ts                # Storeå…¥å£
â”‚
â”œâ”€â”€ composables/                 # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useMatrix.ts            # Matrixç›¸å…³hooks
â”‚   â”œâ”€â”€ useAuth.ts              # è®¤è¯hooks
â”‚   â”œâ”€â”€ useRooms.ts             # æˆ¿é—´hooks
â”‚   â”œâ”€â”€ useMessages.ts          # æ¶ˆæ¯hooks
â”‚   â””â”€â”€ useWebSocket.ts         # WebSocket hooks
â”‚
â”œâ”€â”€ types/                       # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ matrix.ts               # Matrixç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ user.ts                 # ç”¨æˆ·ç±»å‹
â”‚   â”œâ”€â”€ room.ts                 # æˆ¿é—´ç±»å‹
â”‚   â”œâ”€â”€ message.ts              # æ¶ˆæ¯ç±»å‹
â”‚   â””â”€â”€ index.ts                # ç±»å‹å¯¼å‡º
â”‚
â””â”€â”€ styles/                      # æ ·å¼æ–‡ä»¶
    â”œâ”€â”€ variables.scss          # SCSSå˜é‡
    â”œâ”€â”€ mixins.scss             # SCSSæ··å…¥
    â”œâ”€â”€ components.scss         # ç»„ä»¶æ ·å¼
    â””â”€â”€ layout.scss             # å¸ƒå±€æ ·å¼
```

## ğŸ¯ ç»„ä»¶èŒè´£åˆ’åˆ†

### **1. é¡µé¢çº§ç»„ä»¶ (views/)**
- **å•ä¸€èŒè´£**: è´Ÿè´£é¡µé¢æ•´ä½“é€»è¾‘å’Œæ•°æ®æµ
- **ä¸å«æ ·å¼**: ä¸»è¦è´Ÿè´£ç»„åˆå­ç»„ä»¶
- **çŠ¶æ€ç®¡ç†**: è¿æ¥Storeå’Œç»„åˆå¼å‡½æ•°

### **2. å¸ƒå±€ç»„ä»¶ (layouts/)**
- **ç»“æ„å®šä¹‰**: å®šä¹‰é¡µé¢æ•´ä½“å¸ƒå±€ç»“æ„
- **å“åº”å¼**: å¤„ç†ä¸åŒå±å¹•å°ºå¯¸çš„é€‚é…
- **æ’æ§½è®¾è®¡**: æä¾›çµæ´»çš„å†…å®¹æ’æ§½

### **3. ä¸šåŠ¡ç»„ä»¶ (components/)**
- **åŠŸèƒ½ä¸“ä¸€**: æ¯ä¸ªç»„ä»¶åªå¤„ç†ä¸€ä¸ªå…·ä½“åŠŸèƒ½
- **å¯å¤ç”¨**: åœ¨å¤šä¸ªé¡µé¢ä¸­å¯ä»¥å¤ç”¨
- **props/emit**: é€šè¿‡propsæ¥æ”¶æ•°æ®ï¼Œé€šè¿‡emitå‘ä¸Šé€šä¿¡

### **4. æœåŠ¡å±‚ (services/)**
- **APIå°è£…**: å°è£…Matrix SDKçš„å¤æ‚è°ƒç”¨
- **ä¸šåŠ¡é€»è¾‘**: å¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

### **5. çŠ¶æ€ç®¡ç† (stores/)**
- **å…¨å±€çŠ¶æ€**: ç®¡ç†è·¨ç»„ä»¶çš„çŠ¶æ€
- **æŒä¹…åŒ–**: å¤„ç†éœ€è¦æŒä¹…åŒ–çš„æ•°æ®
- **å“åº”å¼**: åŸºäºPiniaçš„å“åº”å¼çŠ¶æ€

## ğŸ”„ æ•°æ®æµå‘

```
User Action â†’ Component â†’ Composable â†’ Service â†’ Matrix SDK
                â†“              â†“          â†“
             UI Update â† Store Update â† Response
```

## ğŸ“ å‘½åè§„èŒƒ

- **ç»„ä»¶**: PascalCase (MessageItem)
- **æ–‡ä»¶å¤¹**: PascalCase (Message/)
- **æœåŠ¡**: camelCase (matrix/client.ts)
- **ç±»å‹**: PascalCase + Interface/Type (MessageInterface)
- **ç»„åˆå¼å‡½æ•°**: camelCase + useå‰ç¼€ (useMatrix)
